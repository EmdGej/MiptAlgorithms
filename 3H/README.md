Решение через скобочные балансы, проходим по последовательности сначала слева - направо, потом справа - налево и насчитываем длину максимальной подпоследовательности из соображений ее определения, т.е: в любой позиции псп число открывающихся скобок не меньше, чем закрывающихся; всего число открывающихся скобок = числу закрывающихся (т.е разность балансов = 0). Проходим в 2 стороны, чтобы не потерять особые случаи.
